<div class="row" accent="danger" size="tiny" [nbSpinner]="submitted" nbSpinnerStatus="info" nbSpinnerSize="large" nbSpinnerMessage="Generando certificado de incapacidad...">
  <div class="col-md-12">

    <nb-flip-card [showToggleButton]="false" [flipped]="flipped">
      <nb-card-front>
        <nb-card>
          <nb-card-header>
            <div class="row m-0 p-0">
              <div class="col text-left">
                <button type="button" (click)="fnReturnPage()" class="btn btn-link text-info cursor-pointer">
                  <i class="fas fa-arrow-left"></i>&nbsp;{{ 'Regresar' | titlecase }}
                </button>
              </div>
              <div class="col-6 text-center">
                <h3 style="margin-top: 6px;">Formulario de generación de incapacidad</h3>
              </div>
              <div class="col text-right">
                &nbsp;
              </div>
            </div> 
          </nb-card-header>
          <nb-card-body>
            <div class="row">
              <div class="col-md-12">
                <div class="mb-2 animated fadeIn" *ngIf="patientData">
                  <div class="card mt-3 mb-3" style="border-color: #1e90ff;">
                    <div (click)="fnShowContent('content-patient-info')" class="cursor-pointer card-header" style="background-color: #1e90ff; color: #FFF; display: flex; justify-content: space-between;">
                      <span>
                        <i class="fas fa-user-injured" style="color: #fff; font-size: 20px;"></i>&nbsp;&nbsp;
                        <h5 class="d-inline-block" style="color: #FFF; margin: 0;">DATOS DEL PACIENTE</h5>
                      </span>
                      <span class="cursor-pointer btn-show-patient-info">
                        <i class="fas fa-chevron-circle-down" style="color: #fff; font-size: 20px;"></i>
                      </span>
                    </div>
                    <div class="card-body content-patient-info" style="display: none;">
                      <div class="row">
                        <div class="col">
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-user"></i>&nbsp;Primer&nbsp;nombre:&nbsp;</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.tPrimerNombre">{{ (patientData?.tPrimerNombre | titlecase) }}</h6>
                            <small *ngIf="!patientData?.tPrimerNombre">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="far fa-id-card"></i>&nbsp;Tipo de documento:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.tipoDocumento?.tTipoIdentificacion">{{ (patientData?.tipoDocumento?.tTipoIdentificacion | titlecase) }}</h6>
                            <small *ngIf="!patientData?.tipoDocumento?.tTipoIdentificacion">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="far fa-calendar-alt"></i>&nbsp;Edad:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.iEdad">{{ patientData?.iEdad + ' años' }}</h6>
                            <small *ngIf="!patientData?.iEdad">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-map-pin"></i>&nbsp;Pa&iacute;s:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.ubicacion?.tNombrePais">{{ patientData?.ubicacion?.tNombrePais | titlecase }}</h6>
                            <small *ngIf="!patientData?.iEdad">No registra dato</small>
                          </div>
                        </div>
                        <div class="col">
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-user"></i>&nbsp;Segundo&nbsp;nombre:&nbsp;</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.tSegundoNombre">{{ (patientData?.tSegundoNombre | titlecase) }}</h6>
                            <small *ngIf="!patientData?.tSegundoNombre">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="far fa-id-card"></i>&nbsp;N&uacute;mero de documento:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.tNumeroDocumento">{{ patientData?.tNumeroDocumento }}</h6>
                            <small *ngIf="!patientData?.tNumeroDocumento">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-at"></i>&nbsp;Correo electr&oacute;nico:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.tEmail">{{ patientData?.tEmail }}</h6>
                            <small *ngIf="!patientData?.tEmail">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-map-pin"></i>&nbsp;Depatamento:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.ubicacion?.tNombreDepartamento">{{ patientData?.ubicacion?.tNombreDepartamento | titlecase }}</h6>
                            <small *ngIf="!patientData?.ubicacion?.tNombreDepartamento">No registra dato</small>
                          </div>
                        </div>
                        <div class="col">
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-user"></i>&nbsp;Primer&nbsp;apellido:&nbsp;</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.tPrimerApellido">{{ (patientData?.tPrimerApellido | titlecase) }}</h6>
                            <small *ngIf="!patientData?.tPrimerApellido">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="far fa-calendar-alt"></i>&nbsp;Fecha de nacimiento:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.dtFechaNacimiento">{{ patientData?.dtFechaNacimiento | date:'mediumDate' }}</h6>
                            <small *ngIf="!patientData?.dtFechaNacimiento">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-map-marker"></i>&nbsp;Direcci&oacute;n:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.tDireccion">{{ patientData?.tDireccion }}</h6>
                            <small *ngIf="!patientData?.tDireccion">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-map-pin"></i>&nbsp;Ciudad:</span><br>
                            <h6 style="color: #000;" *ngIf="patientData?.ubicacion?.tNombreMunicipio">{{ patientData?.ubicacion?.tNombreMunicipio | titlecase }}</h6>
                            <small *ngIf="!patientData?.ubicacion?.tNombreMunicipio">No registra dato</small>
                          </div>
                        </div>
                        <div class="col">
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-user"></i>&nbsp;Segundo&nbsp;apellido:&nbsp;</span><br>
                            <h6 style="color: #000;"*ngIf="patientData?.tSegundoApellido">{{ (patientData?.tSegundoApellido | titlecase) }}</h6>
                            <small *ngIf="!patientData?.tSegundoApellido">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-venus-mars"></i>&nbsp;G&eacute;nero:</span><br>
                            <h6 style="color: #000;"*ngIf="patientData?.genero?.tGenero">{{ (patientData?.genero?.tGenero | titlecase) }}</h6>
                            <small *ngIf="!patientData?.genero?.tGenero">No registra dato</small>
                          </div>
                          <div style="margin-bottom: 0.5rem;">
                            <span><i class="fas fa-phone-square-alt"></i>&nbsp;T&eacute;lefono:</span><br>
                            <h6 style="color: #000;"*ngIf="patientData?.tTelefono">{{ patientData?.tTelefono }}</h6>
                            <small *ngIf="!patientData?.tTelefono">No registra dato</small>
                          </div>
                        </div>
                      </div>
                  
                    </div>
                  </div>
                </div>
                
                <div style="background-color: #fff; padding: 0; border-radius: 6px;" *ngIf="flagShowAlertUser">
                  <div class="alert alert-danger m-0" role="alert">
                    <i class="fas fa-exclamation-circle"></i>&nbsp;
                    Este perfil no tiene permisos para generar incapacidades.
                    <strong 
                      (click)="showModalHelp('Alerta', 'Perfil no autorizado', 'Perfil no autorizado', 'Este perfil no cuenta con los permisos suficientes para la generaci{on y consulta de incapacidades.')"
                      class="cursor-pointer" 
                      style="font-weight: 900; text-decoration: underline;">{{ (dataUserSpecialist) ? dataUserSpecialist['detalles'][0]['ocupacion'] : '' }}</strong>
                      <!-- <small>Fuernte <strong>e-Rethus</strong></small> -->
                  </div>
                </div>
              </div>
            </div>
            


            <div class="row">
              <div class="col">
                <div class="mb-4 pb-4 animated fadeIn" *ngIf="patientData">
                  <div class="card mt-3 mb-3" style="border-color: #878787;">
                    <div class="card-body content-patient-info-1" style="display: block;">
                      <form #form="ngForm" (ngSubmit)="fnGenerateIncapacity()" #generateNewIncapacityCertificateForm="ngForm" aria-labelledby="title">
                        <div class="row">
                          <!-- ********** START - Tipo de atencion ********** -->
                          <div class="mt-2 mb-2 col-6">
                            <div class="form-group">
                              <label for="input-attentionTypes">
                                <h5 class="m-0">
                                  <i class="fas fa-ambulance"></i>&nbsp;Tipo de atenci&oacute;n:&nbsp;
                                  <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                </h5>
                              </label>
                              <ng-select 
                                [items]="collectionAttentionTypes" 
                                bindLabel="tTipoAtencion"
                                id="input-attentionTypes" 
                                name="attentionTypes" 
                                #attentionTypes="ngModel"
                                placeholder="Seleccione tipo de atención" 
                                [ngModelOptions]="{standalone: true}" 
                                [(ngModel)]="patientData.diagnostic.attentionTypes"
                                required 
                                [disabled]="false" 
                                [clearable]="false">
                              </ng-select>
                            </div>
                          </div>
                          <!-- *********** END - Tipo de atencion *********** -->
                          <!-- ********** START - SOAT ********** -->
                          <div class="mt-2 mb-2 col-6">
                            <div class="form-group">
                              <label for="input-attentionTypes">
                                <h5 class="m-0">
                                  <i class="fas fa-car"></i>&nbsp;SOAT:&nbsp;
                                  <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                </h5>
                              </label>
                              <div>
                                <h5 class="d-inline-block m-3">NO</h5>&nbsp;
                                <label class="switch p-2">
                                  <input 
                                  [ngModelOptions]="{standalone: true}" 
                                  [(ngModel)]="patientData.diagnostic.soatInsurance"
                                  type="checkbox" [checked]="(patientData.diagnostic.soatInsurance)?'checked':false">
                                  <span class="slider round"></span>
                                </label>&nbsp;
                                <h5 class="d-inline-block m-3">SI</h5>
                              </div>
                            </div>
                          </div>
                          <!-- *********** END - SOAT *********** -->
                          <!-- ********** START - Tiempo ********** -->
                          <div class="mt-2 mb-2 col-12">
                            <div class="card">
                              <div class="card-header">
                                Tiempo
                              </div>
                              <div class="card-body" style="padding-bottom: 3rem;">
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group">
                                      <label for="input-patientSigns">
                                        <h5 class="m-0">
                                          <i class="far fa-calendar-alt"></i>&nbsp;Fecha inicio afecci&oacute;n:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <input 
                                        class="cursor-pointer"
                                        style="margin: 0; margin-top: 30px !important;"
                                        nbInput
                                        fullWidth 
                                        fieldSize="large"  
                                        type="text" 
                                        [readonly]="true" 
                                        [disabled]="false" 
                                        placeholder="Seleccione fecha de inicio"
                                        id="input-dateStartPatientCondition"  
                                        name="dateStartPatientCondition" 
                                        (focus)="patientData.diagnostic.dateStartPatientCondition = '';"
                                        [(ngModel)]="patientData.diagnostic.dateStartPatientCondition" 
                                        [ngModelOptions]="{standalone: true}"
                                        [status]="dateStartPatientCondition.dirty ? (dateStartPatientCondition.invalid  ? 'danger' : 'basic') : 'basic'" 
                                        #dateStartPatientCondition="ngModel"
                                        bsDatepicker 
                                        [maxDate]="maxDate"
                                        [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }">
                                        <i class="far fa-calendar-alt cursor-pointer" style="position: absolute; right: 25px; top: 70px; font-size: 2rem; color: #007bff;"></i>
                                    </div>
                                  </div>
                                  <div class="col">
                                    <div class="form-group">
                                      <label for="input-patientSigns">
                                        <h5 class="m-0">
                                          <i class="far fa-clock"></i>&nbsp;Hora inicio afecci&oacute;n:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ngb-timepicker 
                                        style="position: absolute; top: 10px; left: 0;"
                                        [meridian]="meridian"
                                        [(ngModel)]="patientData.diagnostic.timeStartPatientCondition"
                                        [ngModelOptions]="{standalone: true}">
                                      </ngb-timepicker>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- *********** END - Tiempo *********** -->
                          <!-- ********** START - Lugar ********** -->
                          <div class="mt-2 mb-2 col-12">
                            <div class="card">
                              <div class="card-header">
                                Lugar
                              </div>
                              <div class="card-body" style="padding-bottom: 3rem;">
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group">
                                      <label for="input-patientCountryCondition">
                                        <h5 class="m-0">
                                          <i class="fas fa-globe-americas"></i>&nbsp;Pais:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionCountries" 
                                        bindLabel="name"
                                        id="input-patientCountryCondition" 
                                        name="patientCountryCondition" 
                                        #patientCountryCondition="ngModel"
                                        placeholder="Seleccione país" 
                                        [ngModelOptions]="{standalone: true}" 
                                        [(ngModel)]="patientData.diagnostic.patientCountryCondition"
                                        required 
                                        [disabled]="false" 
                                        [clearable]="false">
                                      </ng-select>
                                    </div>
                                  </div>
                                  <div class="col">
                                    <div class="form-group">
                                      <label for="input-patientDepartamentCondition">
                                        <h5 class="m-0">
                                          <i class="fas fa-map-marked-alt"></i>&nbsp;Departamento:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionDepartaments" 
                                        bindLabel="departamento"
                                        id="input-patientDepartamentCondition" 
                                        name="patientDepartamentCondition" 
                                        #patientDepartamentCondition="ngModel"
                                        placeholder="Seleccione departamento" 
                                        [ngModelOptions]="{standalone: true}" 
                                        [(ngModel)]="patientData.diagnostic.patientDepartamentCondition"
                                        (change)="fnSetPatientCityCondition($event)"
                                        required 
                                        [disabled]="(patientData?.diagnostic?.patientCountryCondition)?.length < 1 || collectionDepartaments.length < 1" 
                                        [clearable]="false">
                                      </ng-select>
                                    </div>
                                  </div>
                                  <div class="col">
                                    <div class="form-group">
                                      <label for="input-patientCityCondition">
                                        <h5 class="m-0">
                                          <i class="fas fa-map-marker-alt"></i>&nbsp;Ciudad:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionCities" 
                                        bindLabel="name"
                                        id="input-patientCityCondition" 
                                        name="patientCityCondition" 
                                        #patientCityCondition="ngModel"
                                        placeholder="Seleccione ciudad" 
                                        [ngModelOptions]="{standalone: true}" 
                                        [(ngModel)]="patientData.diagnostic.patientCityCondition"
                                        required 
                                        [disabled]="(patientData?.diagnostic?.patientDepartamentCondition)?.length < 1 || collectionCities.length < 1" 
                                        [clearable]="false">
                                      </ng-select>
                                    </div>
                                  </div>
                                  <div class="col-12">
                                    <div class="form-group">
                                      <label for="input-patientAddressCondition">
                                        <h5 class="m-0">
                                          <i class="fas fa-house-user"></i>&nbsp;Direcci&oacute;n:&nbsp;
                                          <span class="cursor-pointer text-optional-field" tooltip="Campo opcional" placement="top" container="body">(Opcional)</span>
                                        </h5>
                                      </label>
                                      <div class="row">
                                        <div class="col-2">
                                          <ng-select 
                                            [items]="collectionWayType" 
                                            bindLabel="name"
                                            id="input-patientAddressWayType" 
                                            name="patientAddressWayType" 
                                            #patientAddressWayType="ngModel"
                                            placeholder="Seleccione tipo via" 
                                            [ngModelOptions]="{standalone: true}" 
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressWayType"
                                            (change)="fnBuildAddress($event)"
                                            required 
                                            [disabled]="false" 
                                            [clearable]="false">
                                          </ng-select>
                                        </div>
                                        <div class="col-1">
                                          <input 
                                            class=""
                                            nbInput
                                            fullWidth 
                                            fieldSize="large"  
                                            type="text" 
                                            [readonly]="false" 
                                            [disabled]="false" 
                                            placeholder="Ingrese el número tipo via"
                                            id="input-patientAddressFirstNumber"  
                                            name="patientAddressFirstNumber" 
                                            (change)="fnBuildAddress($event)"
                                            (focus)="patientData.diagnostic.addressPlace.patientAddressFirstNumber = '';"
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressFirstNumber" 
                                            [ngModelOptions]="{standalone: true}"
                                            [status]="patientAddressFirstNumber.dirty ? (patientAddressFirstNumber.invalid  ? 'danger' : 'basic') : 'basic'" 
                                            #patientAddressFirstNumber="ngModel">
                                        </div>
                                        <div class="col-1">
                                          <ng-select 
                                            [items]="collectionLetters" 
                                            bindLabel="name"
                                            id="input-patientAddressFirstLetter" 
                                            name="patientAddressFirstLetter" 
                                            #patientAddressFirstLetter="ngModel"
                                            placeholder="Seleccione letra de número de via" 
                                            [ngModelOptions]="{standalone: true}" 
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressFirstLetter"
                                            required 
                                            (change)="fnBuildAddress($event)"
                                            [disabled]="false" 
                                            [clearable]="false">
                                          </ng-select>
                                        </div>
                                        <div class="col-1">
                                          <ng-select 
                                            [items]="collectionBis" 
                                            bindLabel="name"
                                            id="input-patientAddressSufixBis" 
                                            name="patientAddressSufixBis" 
                                            #patientAddressSufixBis="ngModel"
                                            placeholder="Seleccione letra de número de via" 
                                            [ngModelOptions]="{standalone: true}" 
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressSufixBis"
                                            required 
                                            (change)="fnBuildAddress($event)"
                                            [disabled]="false" 
                                            [clearable]="false">
                                          </ng-select>
                                        </div>
                                        <div class="col-1">
                                          <ng-select 
                                            [items]="collectionLetters" 
                                            bindLabel="name"
                                            id="input-patientAddressSecondLetter" 
                                            name="patientAddressSecondLetter" 
                                            #patientAddressSecondLetter="ngModel"
                                            placeholder="Seleccione letra de número de via" 
                                            [ngModelOptions]="{standalone: true}" 
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressSecondLetter"
                                            required 
                                            (change)="fnBuildAddress($event)"
                                            [disabled]="false" 
                                            [clearable]="false">
                                          </ng-select>
                                        </div>
                                        <div class="col-1">
                                          <ng-select 
                                            [items]="collectionCardinalSufix" 
                                            bindLabel="name"
                                            id="input-patientAddressFirstCardinalSufix" 
                                            name="patientAddressFirstCardinalSufix" 
                                            #patientAddressFirstCardinalSufix="ngModel"
                                            placeholder="Seleccione sufijo cardinal" 
                                            [ngModelOptions]="{standalone: true}" 
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressFirstCardinalSufix"
                                            required 
                                            (change)="fnBuildAddress($event)"
                                            [disabled]="false" 
                                            [clearable]="false">
                                          </ng-select>
                                        </div>
                                        <div class="col-1 text-center p-0" style="max-width: 30px !important;">
                                          <h3 style="margin: 10px 0px;">#</h3>
                                        </div>
                                        <div class="col-1">
                                          <input 
                                            class=""
                                            nbInput
                                            fullWidth 
                                            fieldSize="large"  
                                            type="text" 
                                            [readonly]="false" 
                                            [disabled]="false" 
                                            placeholder="Ingrese el número tipo via"
                                            id="input-patientAddressSecondNumber"  
                                            name="patientAddressSecondNumber" 
                                            (focus)="patientData.diagnostic.addressPlace.patientAddressSecondNumber = '';"
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressSecondNumber" 
                                            [ngModelOptions]="{standalone: true}"
                                            [status]="patientAddressSecondNumber.dirty ? (patientAddressSecondNumber.invalid  ? 'danger' : 'basic') : 'basic'" 
                                            (change)="fnBuildAddress($event)"
                                            #patientAddressSecondNumber="ngModel">
                                        </div>
                                        <div class="col-1">
                                          <ng-select 
                                            [items]="collectionLetters" 
                                            bindLabel="name"
                                            id="input-patientAddressThirdLetter" 
                                            name="patientAddressThirdLetter" 
                                            #patientAddressThirdLetter="ngModel"
                                            placeholder="Seleccione letra de número de via" 
                                            [ngModelOptions]="{standalone: true}" 
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressThirdLetter"
                                            required 
                                            (change)="fnBuildAddress($event)"
                                            [disabled]="false" 
                                            [clearable]="false">
                                          </ng-select>
                                        </div>
                                        <div class="col-1 text-center p-0" style="max-width: 30px !important;">
                                          <h3 style="margin: 10px 0px;">-</h3>
                                        </div>
                                        <div class="col-1">
                                          <input 
                                            class=""
                                            nbInput
                                            fullWidth 
                                            fieldSize="large"  
                                            type="text" 
                                            [readonly]="false" 
                                            [disabled]="false" 
                                            placeholder="Ingrese el número tipo via"
                                            id="input-patientAddressThirdNumber"  
                                            name="patientAddressThirdNumber" 
                                            (change)="fnBuildAddress($event)"
                                            (focus)="patientData.diagnostic.addressPlace.patientAddressThirdNumber = '';"
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressThirdNumber" 
                                            [ngModelOptions]="{standalone: true}"
                                            [status]="patientAddressThirdNumber.dirty ? (patientAddressThirdNumber.invalid  ? 'danger' : 'basic') : 'basic'" 
                                            #patientAddressThirdNumber="ngModel">
                                        </div>
                                        <div class="col-1">
                                          <ng-select 
                                            [items]="collectionCardinalSufix" 
                                            bindLabel="name"
                                            id="input-patientAddressSecondCardinalSufix" 
                                            name="patientAddressSecondCardinalSufix" 
                                            #patientAddressSecondCardinalSufix="ngModel"
                                            placeholder="Seleccione sufijo cardinal" 
                                            [ngModelOptions]="{standalone: true}" 
                                            [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressSecondCardinalSufix"
                                            required 
                                            (change)="fnBuildAddress($event)"
                                            [disabled]="false" 
                                            [clearable]="false">
                                          </ng-select>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-12 mt-3 mb-2" *ngIf="patientData?.diagnostic?.addressPlace?.patientAddressWayType?.name">
                                          <label for="input-addresPlace">
                                            <small class="m-0 cursor-pointer" (click)="fnShowContent('listAddresPlace')">
                                              <i class="fas fa-chevron-right"></i>&nbsp;Direcci&oacute;n generada:&nbsp;
                                            </small>
                                          </label>
                                          <div class="listAddresPlace m-2" style="display: block;">
                                            <div class="m-2 d-flex justify-content-between" style="border-radius: 5px; font-size: .9em; color: #000; padding: 5px; font-weight: 400;">
                                              <h4>
                                                {{ addressPlaceBuilded | uppercase }}
                                              </h4>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <!-- <input 
                                        class=""
                                        nbInput
                                        fullWidth 
                                        fieldSize="large"  
                                        type="text" 
                                        [readonly]="false" 
                                        [disabled]="false" 
                                        placeholder="Ingrese la dirección paciente"
                                        id="input-patientAddressCondition"  
                                        name="patientAddressCondition" 
                                        (focus)="patientData.diagnostic.patientAddressCondition = '';"
                                        [(ngModel)]="patientData.diagnostic.patientAddressCondition" 
                                        [ngModelOptions]="{standalone: true}"
                                        [status]="patientAddressCondition.dirty ? (patientAddressCondition.invalid  ? 'danger' : 'basic') : 'basic'" 
                                        #patientAddressCondition="ngModel"> -->
                                    </div>
                                  </div>
                                  <div class="col-12">
                                    <div class="form-group">
                                      <label for="input-patientAddressPlaceCondition">
                                        <h5 class="m-0">
                                          <i class="fas fa-map-pin"></i>&nbsp;<small>(Barrio, Municipio, Vereda):</small>&nbsp;
                                          <span class="cursor-pointer text-optional-field" tooltip="Campo opcional" placement="top" container="body">(Opcional)</span>
                                        </h5>
                                      </label>
                                      <input 
                                        class=""
                                        nbInput
                                        fullWidth 
                                        fieldSize="large"  
                                        type="text" 
                                        [readonly]="false" 
                                        [disabled]="false" 
                                        placeholder="Seleccione fecha de inicio"
                                        id="input-patientAddressPlaceCondition"  
                                        name="patientAddressPlaceCondition" 
                                        (focus)="patientData.diagnostic.addressPlace.patientAddressPlaceCondition = '';"
                                        [(ngModel)]="patientData.diagnostic.addressPlace.patientAddressPlaceCondition" 
                                        [ngModelOptions]="{standalone: true}"
                                        [status]="patientAddressPlaceCondition.dirty ? (patientAddressPlaceCondition.invalid  ? 'danger' : 'basic') : 'basic'" 
                                        #patientAddressPlaceCondition="ngModel">
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- *********** END - Lugar *********** -->
                          <!-- ********** START - Modo ********** -->
                          <div class="mt-2 mb-2 col-12">
                            <div class="card">
                              <div class="card-header">
                                Modo
                              </div>
                              <div class="card-body" style="padding-bottom: 3rem;">
                                <div class="row">
                                  <!-- ********** START - Prorroga ********** -->
                                  <div class="mt-2 mb-2 col-6">
                                    <div class="form-group">
                                      <label for="input-extensionIncapacity">
                                        <h5 class="m-0">
                                          <i class="fas fa-calendar-plus"></i>&nbsp;Pr&oacute;rroga:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <div>
                                        <h5 class="d-inline-block m-3">NO</h5>&nbsp;
                                        <label class="switch p-2">
                                          <input 
                                          id="input-extensionIncapacity"
                                          [ngModelOptions]="{standalone: true}" 
                                          [(ngModel)]="patientData.diagnostic.extensionIncapacity"
                                          type="checkbox" [checked]="(patientData.diagnostic.extensionIncapacity)?'checked':false">
                                          <span class="slider round"></span>
                                        </label>&nbsp;
                                        <h5 class="d-inline-block m-3">SI</h5>
                                      </div>
                                    </div>
                                  </div>
                                  <!-- *********** END - Prorroga *********** -->
                                  <!-- ********** START - Tipo de afección ********** -->
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="input-afectionType">
                                        <h5 class="m-0">
                                          <i class="fas fa-band-aid"></i>&nbsp;Tipo de afecci&oacute;n:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionAfectionType" 
                                        bindLabel="name" 
                                        id="input-afectionType" 
                                        name="afectionType" 
                                        #afectionType="ngModel"
                                        placeholder="Seleccione tipo de afección" 
                                        [ngModelOptions]="{standalone: true}" 
                                        [(ngModel)]="patientData.diagnostic.afectionType"
                                        (change)="fnAfectionType($event)"
                                        required 
                                        [disabled]="false" 
                                        [clearable]="false">
                                      </ng-select>
                                    </div>
                                  </div>
                                  <!-- *********** END - Tipo de afección *********** -->
                                  <!-- ********** START - Palabras clave ********** -->
                                  <div class="col-6" *ngIf="true">
                                    <div class="form-group">
                                      <label for="input-patientConditionKeywords">
                                        <h5 class="m-0">
                                          <i class="fas fa-spell-check"></i>&nbsp;Agregar palabras clave:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionPatientConditionKeywords" 
                                        [multiple]="true" 
                                        [closeOnSelect]="false"
                                        [searchable]="true" 
                                        [hideSelected]="true" 
                                        bindLabel="name"
                                        id="input-patientConditionKeywords" 
                                        name="patientConditionKeywords" 
                                        #patientConditionKeywords="ngModel"
                                        [(ngModel)]="patientData.diagnostic.patientConditionKeywords"
                                        [ngModelOptions]="{standalone: true}" 
                                        placeholder="Seleccione palabra(s) clave" 
                                        required 
                                        [disabled]="false" 
                                        [clearable]="true">
                                        <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                          <div class="ng-value" *ngFor="let item of items | slice:0:2" style="padding: 8px; border-radius: 10px;">
                                              <span class="ng-value-label">{{item.name}}</span>
                                              <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                          </div>
                                          <div class="ng-value" *ngIf="items.length > 2">
                                              <span class="ng-value-label">{{items.length - 2}} m&aacute;s...</span>
                                          </div>
                                        </ng-template>
                                      </ng-select>
        
                                      <div class="mt-3" *ngIf="patientData?.diagnostic?.patientConditionKeywords?.length > 0">
                                        <label for="input-patientConditionKeywords">
                                          <small class="m-0 cursor-pointer" (click)="fnShowContent('listPatientConditionKeywords')">
                                            <i class="fas fa-chevron-right"></i>&nbsp;Palabras clave seleccionadas:&nbsp;
                                          </small>
                                        </label>
                                        <div class="listPatientConditionKeywords m-2" style="display: none;">
                                          <div class="m-2 d-flex justify-content-between" style="border-radius: 5px; font-size: .9em; background-color: #ebf5ff !important; color: #000; padding: 5px; font-weight: 400;" *ngFor="let item of patientData.diagnostic.patientConditionKeywords; let i=index">
                                            <span class="text-truncate d-inline-block" style="max-width: 95%;">{{ item.name }}</span>
                                            <i (click)="fnRemovePatientKeywords(item, i, patientData.diagnostic.patientConditionKeywords)" tooltip="Eliminar síntoma" placement="top" container="body" class="fas fa-times-circle" style="cursor: pointer; color: #f86161; display: inline-block; font-size: 15px;"></i>
                                          </div>
                                        </div>
                                      </div>
        
                                    </div>
                                  </div>
                                  <!-- *********** END - Palabras clave *********** -->
                                  <!-- ********** START - Descripcion acontecimientos ********** -->
                                  <div class="col-12">
                                    <div class="form-group">
                                      <label for="input-patientModeDescription">
                                        <h5 class="m-0">
                                          <i class="fas fa-globe-americas"></i>&nbsp;Descripci&oacute;n de los acontecimientos y causas:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <textarea 
                                        nbInput 
                                        fullWidth 
                                        [readonly]="false" 
                                        [disabled]="false" 
                                        placeholder="Ingrese la descripción de los acontecimientos y causas de la afección del paciente ..." 
                                        id="input-patientModeDescription"  
                                        name="patientModeDescription" 
                                        (focus)="patientData.diagnostic.patientModeDescription = '';"
                                        [(ngModel)]="patientData.diagnostic.patientModeDescription" 
                                        [ngModelOptions]="{standalone: true}"
                                        [status]="patientModeDescription.dirty ? (patientModeDescription.invalid  ? 'danger' : 'basic') : 'basic'" 
                                        #patientModeDescription="ngModel" 
                                        rows="6"
                                      >
                                      </textarea>
                                    </div>
                                  </div>
                                  <!-- *********** END - Descripcion acontecimientos *********** -->
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- *********** END - Modo *********** -->
                          <!-- ********** START - Diagnostico paciente ********** -->
                          <div class="mt-2 mb-2 col-12">
                            <div class="card">
                              <div class="card-header">
                                Diagnostico paciente
                              </div>
                              <div class="card-body" style="padding-bottom: 3rem;">
                                <div class="row">
                                  <!-- ********** START - Sintomas ********** -->
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="input-patientSymptoms">
                                        <h5 class="m-0">
                                          <i class="fas fa-clipboard-list"></i>&nbsp;S&iacute;ntomas:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionPatientSymptoms" 
                                        [multiple]="true" 
                                        [closeOnSelect]="false"
                                        [searchable]="true" 
                                        [hideSelected]="true" 
                                        bindLabel="tFullDescripcion"
                                        id="input-patientSymptoms" 
                                        name="patientSymptoms" 
                                        #patientSymptoms="ngModel"
                                        [(ngModel)]="patientData.diagnostic.patientSymptoms"
                                        [ngModelOptions]="{standalone: true}" 
                                        placeholder="Seleccione síntoma(s) del paciente" 
                                        required 
                                        [disabled]="false" 
                                        [clearable]="true">
                                        <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                          <div class="ng-value" *ngFor="let item of items | slice:0:2" style="padding: 8px; border-radius: 10px;">
                                              <span class="ng-value-label">{{item.tFullDescripcion}}</span>
                                              <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                          </div>
                                          <div class="ng-value" *ngIf="items.length > 2">
                                              <span class="ng-value-label">{{items.length - 2}} m&aacute;s...</span>
                                          </div>
                                        </ng-template>
                                      </ng-select>
        
                                      <div class="mt-3" *ngIf="patientData?.diagnostic?.patientSymptoms?.length > 0">
                                        <label for="input-patientSymptoms">
                                          <small class="m-0 cursor-pointer" (click)="fnShowContent('listPatientSymptoms')">
                                            <i class="fas fa-chevron-right"></i>&nbsp;S&iacute;ntomas seleccionados:&nbsp;
                                          </small>
                                        </label>
                                        <div class="listPatientSymptoms m-2" style="display: none;">
                                          <div class="m-2 d-flex justify-content-between" style="border-radius: 5px; font-size: .9em; background-color: #ebf5ff !important; color: #000; padding: 5px; font-weight: 400;" *ngFor="let item of patientData.diagnostic.patientSymptoms; let i=index">
                                            <span class="text-truncate d-inline-block" style="max-width: 95%;">{{ item.tFullDescripcion }}</span>
                                            <i (click)="fnRemovePatientSymptom(item, i, patientData.diagnostic.patientSymptoms)" tooltip="Eliminar síntoma" placement="top" container="body" class="fas fa-times-circle" style="cursor: pointer; color: #f86161; display: inline-block; font-size: 15px;"></i>
                                          </div>
                                        </div>
                                      </div>
        
                                    </div>
                                  </div>
                                  <!-- *********** END - Sintomas *********** -->
                                  <!-- ********** START - Signos ********** -->
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="input-patientSigns">
                                        <h5 class="m-0">
                                          <i class="fas fa-heartbeat"></i>&nbsp;Signos:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionPatientSigns" 
                                        [multiple]="true" 
                                        [closeOnSelect]="false"
                                        [searchable]="true" 
                                        [hideSelected]="true" 
                                        bindLabel="tFullDescripcion"
                                        id="input-patientSigns" 
                                        name="patientSigns" 
                                        #patientSigns="ngModel"
                                        [(ngModel)]="patientData.diagnostic.patientSigns"
                                        [ngModelOptions]="{standalone: true}" 
                                        placeholder="Seleccione signo(s) del paciente" 
                                        required 
                                        [disabled]="false" 
                                        [clearable]="true">
                                        <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                          <div class="ng-value" *ngFor="let item of items | slice:0:2" style="padding: 8px; border-radius: 10px;">
                                              <span class="ng-value-label">{{item.tFullDescripcion}}</span>
                                              <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                          </div>
                                          <div class="ng-value" *ngIf="items.length > 2">
                                              <span class="ng-value-label">{{items.length - 2}} m&aacute;s...</span>
                                          </div>
                                        </ng-template>
                                      </ng-select>
        
                                      <div class="mt-3" *ngIf="patientData?.diagnostic?.patientSigns?.length > 0">
                                        <label for="input-patientSigns">
                                          <small class="m-0 cursor-pointer" (click)="fnShowContent('listPatientSigns')">
                                            <i class="fas fa-chevron-right"></i>&nbsp;Signos seleccionados:&nbsp;
                                          </small>
                                        </label>
                                        <div class="listPatientSigns m-2" style="display: none;">
                                          <div class="m-2 d-flex justify-content-between" style="border-radius: 5px; font-size: .9em; background-color: #ebf5ff !important; color: #000; padding: 5px; font-weight: 400;" *ngFor="let item of patientData.diagnostic.patientSigns; let i=index">
                                            <span class="text-truncate d-inline-block" style="max-width: 95%;">{{ item.tFullDescripcion }}</span>
                                            <i (click)="fnRemovePatientSign(item, i, patientData.diagnostic.patientSigns)" tooltip="Eliminar signo" placement="top" container="body" class="fas fa-times-circle" style="cursor: pointer; color: #f86161; display: inline-block; font-size: 15px;"></i>
                                          </div>
                                        </div>
                                      </div>
        
                                    </div>
                                  </div>
                                  <!-- *********** END - Signos *********** -->
                                  <!-- ********** START - Diagnostico CIE10 ********** -->
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="input-patientDiagnostics">
                                        <h5 class="m-0">
                                          <i class="fas fa-notes-medical"></i>&nbsp;Diagn&oacute;stico (CIE10):&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionPatientDiagnostics" 
                                        [virtualScroll]="true" 
                                        [multiple]="false" 
                                        [closeOnSelect]="true"
                                        [searchable]="true" 
                                        [hideSelected]="true" 
                                        bindLabel="tFullDescripcion"
                                        id="input-patientDiagnostics" 
                                        name="patientDiagnostics" 
                                        #patientDiagnostics="ngModel"
                                        [(ngModel)]="patientData.diagnostic.patientDiagnostics"
                                        [ngModelOptions]="{standalone: true}" 
                                        placeholder="Seleccione diagnóstico del paciente" 
                                        (change)="fnGetCorrelationDiagnostic($event); patientData.diagnostic.laterality = null; dataDiagnosticCorrelation = null"
                                        required 
                                        [disabled]="false" 
                                        [clearable]="true">
                                        <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                          <div class="ng-value" *ngFor="let item of items | slice:0:2" style="padding: 8px; border-radius: 10px;">
                                              <span class="ng-value-label">{{item.tFullDescripcion}}</span>
                                              <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                          </div>
                                          <div class="ng-value" *ngIf="items.length > 2">
                                              <span class="ng-value-label">{{items.length - 2}} m&aacute;s...</span>
                                          </div>
                                        </ng-template>
                                      </ng-select>
        
                                      <!-- <div class="mt-3" *ngIf="patientData?.diagnostic?.patientDiagnostics?.tCie10">
                                        <label for="input-patientDiagnostics">
                                          <small class="m-0 cursor-pointer" (click)="fnShowContent('listPatientDiagnostics')">
                                            <i class="fas fa-chevron-right"></i>&nbsp;Diagn&oacute;stico seleccionado:&nbsp;
                                          </small>
                                        </label>
                                        <div class="listPatientDiagnostics m-2" style="display: none;">
                                          <div class="m-2 d-flex justify-content-between" style="border-radius: 5px; font-size: .9em; background-color: #ebf5ff !important; color: #000; padding: 5px; font-weight: 400;">
                                            <span class="text-truncate d-inline-block" style="max-width: 95%;">{{ patientData?.diagnostic?.patientDiagnostics?.tFullDescripcion }}</span>
                                            <i (click)="fnRemovePatientDiagnostic(patientData.diagnostic.patientDiagnostics)" tooltip="Eliminar síntoma" placement="top" container="body" class="fas fa-times-circle" style="cursor: pointer; color: #f86161; display: inline-block; font-size: 15px;"></i>
                                          </div>
                                        </div>
                                      </div> -->
        
                                    </div>
                                  </div>
                                  <!-- *********** END - Diagnostico CIE10 *********** -->
                                  <!-- ********** START - Lateralidad ********** -->
                                  <div class="col-6" *ngIf="applyLaterality">
                                    <div class="form-group">
                                      <label for="input-laterality">
                                        <h5 class="m-0">
                                          <i class="fas fa-people-arrows"></i>&nbsp;Lateralidad:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionLateralities" 
                                        bindLabel="tNombre" 
                                        id="input-laterality" 
                                        name="laterality" 
                                        #laterality="ngModel"
                                        placeholder="Seleccione lateralidad" 
                                        [ngModelOptions]="{standalone: true}" 
                                        [(ngModel)]="patientData.diagnostic.laterality"
                                        required 
                                        [disabled]="false" 
                                        [clearable]="false">
                                      </ng-select>
                                    </div>
                                  </div>
                                  <!-- *********** END - Lateralidad *********** -->
                                  <!-- ********** START - Origen ********** -->
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="input-incapacityType">
                                        <h5 class="m-0">
                                          <i class="fab fa-accessible-icon"></i>&nbsp;Origen:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <ng-select 
                                        [items]="collectionIncapacityType" 
                                        bindLabel="tOrigenIncapacidad"
                                        id="input-incapacityType" 
                                        name="incapacityType" 
                                        #incapacityType="ngModel"
                                        placeholder="Seleccione origen incapacidad" 
                                        [ngModelOptions]="{standalone: true}" 
                                        [(ngModel)]="patientData.diagnostic.incapacityType"
                                        required 
                                        [disabled]="collectionIncapacityType.length < 1" 
                                        [clearable]="false">
                                      </ng-select>
                                    </div>
                                  </div>
                                  <!-- *********** END - Origen *********** -->
                                  <div class="col-12">
                                    <hr>
                                    <div class="form-group">
                                      <label for="input-patientConditionMedicalDescription">
                                        <h5 class="m-0">
                                          <i class="far fa-calendar-plus"></i>&nbsp;Descripci&oacute;n sintomatologica:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <textarea 
                                        nbInput 
                                        fullWidth 
                                        [readonly]="false" 
                                        [disabled]="false" 
                                        placeholder="Ingrese la descripción médica sintomatologica del paciente ..." 
                                        id="input-patientConditionMedicalDescription"  
                                        name="patientConditionMedicalDescription" 
                                        (focus)="patientData.diagnostic.patientConditionMedicalDescription = '';"
                                        [(ngModel)]="patientData.diagnostic.patientConditionMedicalDescription" 
                                        [ngModelOptions]="{standalone: true}"
                                        [status]="patientConditionMedicalDescription.dirty ? (patientConditionMedicalDescription.invalid  ? 'danger' : 'basic') : 'basic'" 
                                        #patientConditionMedicalDescription="ngModel" 
                                        rows="6"
                                      >
                                      </textarea>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- *********** END - Diagnostico paciente *********** -->
                          <!-- ********** START - Dias concepto medico ********** -->
                          <div class="mt-2 mb-2 col-12" *ngIf="loadingData">
                            <div class="card">
                              <div class="card-header">
                                D&iacute;as concepto m&eacute;dico
                              </div>
                              <div class="card-body" style="padding-bottom: 3rem;">
                                <div class="row">
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="input-patientSigns">
                                        <h5 class="m-0">
                                          <i class="fas fa-user-clock"></i>&nbsp;Prorroga incapacidad:&nbsp;
                                        </h5>
                                      </label>
                                      <br>
                                      <div class="text mt-2 mb-4">
                                        <h5 class="" *ngIf="dataDiagnosticCorrelation" [ngClass]="{ 'text-danger': (dataDiagnosticCorrelation?.bProrroga), 'text-success': (!dataDiagnosticCorrelation?.bProrroga) }" style="font-weight: 900; font-size: 2rem;">
                                          <i class="fas fa-user-clock"></i>&nbsp;{{ (dataDiagnosticCorrelation?.bProrroga) ? 'Aplicada' : 'No Aplicada' }} 
                                        </h5>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label>
                                        <h5 class="m-0">
                                          <i class="far fa-calendar-check"></i>&nbsp;D&iacute;as maximos acumulados prorroga:&nbsp;
                                        </h5>
                                      </label>
                                      <br>
                                      <div class="text mt-2 mb-4">
                                        <h5 class="text-info" style="font-weight: 900; font-size: 2rem;">
                                          <i class="far fa-calendar-check"></i>&nbsp;Max. {{ patientData?.diagnostic?.patientDiagnostics?.iDiasMaxAcumulados }} Días
                                        </h5>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label>
                                        <h5 class="m-0">
                                          <i class="far fa-calendar-check"></i>&nbsp;D&iacute;as maximos consulta:&nbsp;
                                        </h5>
                                      </label>
                                      <br>
                                      <div class="text mt-2 mb-4">
                                        <h5 class="text-info" style="font-weight: 900; font-size: 2rem;">
                                          <i class="far fa-calendar-check"></i>&nbsp;Max. {{ patientData?.diagnostic?.patientDiagnostics?.iDiasMaxConsulta }} Días
                                        </h5>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-6">
                                    <div class="form-group">
                                      <label for="input-patientDaysGranted">
                                        <h5 class="m-0">
                                          <i class="far fa-calendar-check"></i>&nbsp;D&iacute;as otorgados:&nbsp;
                                        </h5>
                                      </label>
                                      <br>
                                      <div>
                                        <div class="mt-2 mb-4">
                                          <h5 class="text-success text-center" [ngClass]="{'text-success': (patientData.diagnostic.patientDaysGranted <= patientData?.diagnostic?.patientDiagnostics?.iDiasMaxConsulta), 'text-danger': (patientData.diagnostic.patientDaysGranted > patientData?.diagnostic?.patientDiagnostics?.iDiasMaxConsulta) }" style="font-weight: 900; font-size: 2rem;">
                                            <i class="far fa-calendar-check"></i>&nbsp;{{patientData?.diagnostic?.patientDaysGranted || 0 }} D&iacute;as
                                          </h5>
                                        </div>
                                        <input 
                                          type="range" 
                                          style="width: 100%;"
                                          class="form-range" 
                                          min="1" 
                                          max="30" 
                                          step="1" 
                                          id="input-patientDaysGranted"  
                                          name="patientDaysGranted" 
                                          [(ngModel)]="patientData.diagnostic.patientDaysGranted" 
                                          (change)="fnSetPatientDaysGranted($event)"
                                          [ngModelOptions]="{standalone: true}"
                                          #patientDaysGranted="ngModel">
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row" *ngIf="(patientData.diagnostic.patientDaysGranted > patientData?.diagnostic?.patientDiagnostics?.iDiasMaxConsulta)">
                                  <div class="col">
                                    <div class="form-group">
                                      <label for="input-patientDaysGaratedDescription">
                                        <h5 class="m-0">
                                          <i class="far fa-calendar-plus"></i>&nbsp;Justificaci&oacute;n d&iacute;as adicionales otorgados:&nbsp;
                                          <span class="text-danger cursor-pointer" tooltip="Campo obligatorio" placement="top" container="body">*</span>
                                        </h5>
                                      </label>
                                      <textarea 
                                        nbInput 
                                        fullWidth 
                                        [readonly]="false" 
                                        [disabled]="false" 
                                        placeholder="Ingrese la descripción de los acontecimientos y causas de la afección del paciente ..." 
                                        id="input-patientDaysGaratedDescription"  
                                        name="patientDaysGaratedDescription" 
                                        (focus)="patientData.diagnostic.patientDaysGaratedDescription = '';"
                                        [(ngModel)]="patientData.diagnostic.patientDaysGaratedDescription" 
                                        [ngModelOptions]="{standalone: true}"
                                        [status]="patientDaysGaratedDescription.dirty ? (patientDaysGaratedDescription.invalid  ? 'danger' : 'basic') : 'basic'" 
                                        #patientDaysGaratedDescription="ngModel" 
                                        rows="6"
                                      >
                                      </textarea>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- *********** END - Dias concepto medico *********** -->
                          <!-- ********** START - Valores incapacidades por empleador ********** -->
                          <div class="mt-2 mb-2 col-12" *ngIf="loadingData">
                            <div class="card">
                              <div class="card-header">
                                Valores incapacidades por empleador
                              </div>
                              <div class="card-body" style="padding-bottom: 3rem;">
                                <div class="row pr-4 pl-4">
                                  <div class="col p-0">
                                    <button 
                                      type="button" 
                                      status="info"
                                      size="giant" 
                                      class="button_diagnostic font_family_roboto cursor-pointer" 
                                      [disabled]="false" 
                                      (click)="fnAddNewEmployerPatient(collectionDataEmployers)"
                                      nbButton>
                                      <i class="fas fa-industry"></i>&nbsp;
                                      Agregar empleador
                                    </button>
                                  </div>
                                </div>
                                <div class="row p-4">
                                  <div *ngFor="let itemEmployer of collectionDataEmployers; let i = index;" class="col-12 mb-2" style="border: 1px solid #ccc; margin: 0; padding: 17px; border-radius: 12px; background-color: #f5e9ff;">                                    
                                    <div class="row">
                                      <div class="col-2">
                                        <span>NIT:</span>&nbsp;<h4>{{ itemEmployer?.nit }}</h4>
                                      </div>
                                      <div class="col">
                                        <span>Nombre:</span>&nbsp;<h4>{{ itemEmployer?.tRazonSocial }}</h4>
                                      </div>
                                      <div class="col">
                                        <span>Valor total incapacidad:</span>
                                        <h3>
                                          <span class="badge p-1" style="padding: 5px !important; background-color: #201E50 !important; color: #fff !important;">
                                            {{ totalPatientValueToPay | currency:'CAD':'symbol-narrow':'4.0-0' }}
                                          </span>
                                        </h3>
                                      </div>
                                      <div class="col-1 d-flex">
                                        <span (click)="fnShowPreviewIncapacityCertificate(itemEmployer, i)" style="display: flex; justify-content: end; align-items: center;" tooltip="Vista preliminar" placement="top" container="body">
                                          <i class="fas fa-eye cursor-pointer" style="color: #888888; font-size: 25px; display: flex; justify-content: end; align-items: center;"></i>
                                        </span>
                                      </div>
                                      <div class="col-1 d-flex">
                                        <span style="display: flex; justify-content: end; align-items: center;" tooltip="Ver detalle" placement="top" container="body">
                                          <i (click)="fnShowContent('content-prices-' + i)" class="fas fa-chevron-circle-down cursor-pointer" style="color: #888888; font-size: 25px; display: flex; justify-content: end; align-items: center;"></i>
                                        </span>
                                      </div>
                                    </div>
                                    <div class="col-12 content-prices-detail content-prices-{{i}}" style="display: none; border: 1px solid #ccc; margin: 0; padding: 17px; border-radius: 12px; background-color: #f5e9ff;">                                    
                                      <div class="row">
                                        <div class="col-8">
                                          <span>NIT:</span>&nbsp;<h4>{{ itemEmployer?.nit }}</h4>
                                          <span>Nombre:</span>&nbsp;<h4>{{ itemEmployer?.tRazonSocial }}</h4>
                                          <span>C&oacute;digo CIIU:</span>&nbsp;<h4>{{ itemEmployer?.ciiu | titlecase }}</h4>
                                          <span>Ocupaci&oacute;n:</span>&nbsp;<h4>{{ itemEmployer?.ocupacionPaciente | titlecase }}</h4>
                                          <span>Fecha de ingreso:</span>&nbsp;<h4>{{ itemEmployer?.fechaIngreso }}</h4>
                                          <span>Contrato:</span>&nbsp;<h5><span class="badge rounded-pill text-light" [ngClass]="{'bg-success': itemEmployer?.estadoContrato, 'bg-danger': !itemEmployer?.estadoContrato }" style="padding: 7px; width: 65px;">{{ (itemEmployer?.estadoContrato) ? 'Activo' : 'Inactivo' }}</span></h5>
                                        </div>
                                        <div class="col-4">
                                          <div class="text-center p-2 m-1" style="border: 1px solid #ccc; border-radius: 10px;">
                                            <h5 class="text-center text-primary fw-bolder">IBC</h5>
                                            <!-- <h4 class="text-center">{{ itemEmployer?.ibc | currency:'CAD':'symbol-narrow':'4.0-0' }} COP</h4> -->
                                            <input 
                                              class=""
                                              nbInput
                                              fullWidth 
                                              fieldSize="large"  
                                              type="text" 
                                              [readonly]="false" 
                                              [disabled]="false" 
                                              placeholder="Ingrese salario del paciente"
                                              id="input-patientIBC"  
                                              name="patientIBC" 
                                              [(ngModel)]="patientIBC[i]" 
                                              (input)="fnCalcValueIncapacity(patientIBC[i], i, patientData.diagnostic.patientDaysGranted, dataDiagnosticCorrelation)" 
                                              [status]="'info'">
                                          </div>
                                          <div class="text-center p-2 m-1" style="border: 1px solid #ccc; border-radius: 10px;">
                                            <h5 class="text-center text-primary fw-bolder">Valor por d&iacute;a de incapacidad</h5>
                                            <h4 class="text-center">{{ valueDayJob | currency:'CAD':'symbol-narrow':'4.0-0' }} COP</h4>
                                          </div>
                                          <div class="text-center p-2 m-1" style="border: 1px solid #ccc; border-radius: 10px;">
                                            <h5 class="text-center text-primary fw-bolder">Valor total dias incapacidad</h5>
                                            <h2 class="text-center" style="font-weight: 700;">
                                              <span class="badge p-1" style="padding: 5px !important; background-color: #201E50 !important; color: #fff !important;">
                                                {{ totalPatientValueToPay | currency:'CAD':'symbol-narrow':'4.0-0' }} COP
                                              </span>
                                            </h2>
                                          </div>
                                          <!-- <div class="text-center p-2 m-1" style="border: 1px solid #ccc; border-radius: 10px;">
                                            <h5 class="text-center text-primary fw-bolder">Salario</h5>
                                            <h4 class="text-center">{{ itemEmployer?.salario | currency:'CAD':'symbol-narrow':'4.0-0' }} COP</h4>
                                          </div>
                                          <div class="text-center p-2 m-1" style="border: 1px solid #ccc; border-radius: 10px;">
                                            <h5 class="text-center text-primary fw-bolder">IBC</h5>
                                            <h4 class="text-center">{{ itemEmployer?.ibc | currency:'CAD':'symbol-narrow':'4.0-0' }} COP</h4>
                                          </div>
                                          <div class="text-center p-2 m-1" style="border: 1px solid #ccc; border-radius: 10px;">
                                            <h5 class="text-center text-primary fw-bolder">Valor por d&iacute;a de incapacidad</h5>
                                            <h4 class="text-center">{{ itemEmployer?.valorDiaIncapcidad | currency:'CAD':'symbol-narrow':'4.0-0' }} COP</h4>
                                          </div>
                                          <div class="text-center p-2 m-1" style="border: 1px solid #ccc; border-radius: 10px;">
                                            <h5 class="text-center text-primary fw-bolder">Valor total dias incapacidad</h5>
                                            <h2 class="text-center" style="font-weight: 700;">
                                              <span class="badge p-1" style="padding: 5px !important; background-color: #201E50 !important; color: #fff !important;">
                                                {{ patientData?.diagnostic?.patientDaysGranted * itemEmployer?.valorDiaIncapcidad | currency:'CAD':'symbol-narrow':'4.0-0' }} COP
                                              </span>
                                            </h2>
                                          </div> -->
                                        </div>
                                        
                                      </div>
                                    </div>

                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- *********** END - Valores incapacidades por empleador *********** -->
                          
                          <div class="col-12">
                            <div>
                              <!-- <button 
                                nbButton 
                                fullWidth 
                                type="submit" 
                                status="info"
                                size="giant" 
                                class="button_diagnostic font_family_roboto pointer"
                                [disabled]="
                                  dataDiagnosticCorrelation?.bProrroga == null || 
                                  patientData?.diagnostic?.soatInsurance == null || 
                                  !patientData?.diagnostic?.patientDiagnostics || 
                                  patientData?.diagnostic?.patientDiagnostics == null || 
                                  !dataDiagnosticCorrelation?.iDiasAcumuladosPorroga || 
                                  dataDiagnosticCorrelation?.iDiasAcumuladosPorroga == null || 
                                  !patientData?.diagnostic?.patientDaysGranted || 
                                  patientData?.diagnostic?.patientDaysGranted == null || 
                                  !dataDiagnosticCorrelation?.iIddiagnosticoCorrelacion || 
                                  dataDiagnosticCorrelation?.iIddiagnosticoCorrelacion == null || 
                                  !dataIPS || 
                                  dataIPS == null || 
                                  patientData.diagnostic.attentionTypes == null
                                " 
                                [class.btn-pulse]="submitted">
                                Generar Certificado de Incapacidad
                              </button> -->
                              <button 
                                nbButton 
                                fullWidth 
                                type="submit" 
                                status="info"
                                size="giant" 
                                class="button_diagnostic font_family_roboto pointer"
                                [disabled]="false" 
                                [class.btn-pulse]="submitted">
                                Generar Certificado de Incapacidad
                              </button>
                            </div>
                          </div>


                          


                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- <pre>
              {{ patientData.diagnostic | json }}
            </pre> -->

          </nb-card-body>
        </nb-card>
      </nb-card-front>
      <nb-card-back>
        <nb-card>
          <nb-card-header>
            <div class="row m-0 p-0">
              <div class="col text-left">
                <button type="button" (click)="fnReturnPage()" class="btn btn-link text-info cursor-pointer">
                  <i class="fas fa-arrow-left"></i>&nbsp;{{ 'Regresar' | titlecase }}
                </button>
              </div>
              <div class="col text-center">
                <h3 style="margin-top: 6px;">Grafico de incapacidades</h3>
              </div>
              <div class="col text-right">
                <button type="button" (click)="fnViewHistory()" class="btn btn-link text-info cursor-pointer">
                  {{ 'Ver historico' | titlecase }}&nbsp;
                  <i class="fas fa-list"></i>
                </button>
              </div>
            </div> 
            
            <!-- <span class=" mt-2 mb-3">
              <i class="fas fa-arrow-left"></i>&nbsp;Regresar
            </span> -->
            
          </nb-card-header>
          <nb-card-body>
            <div>
              Paciente: 
              <h4><strong>
                {{ patientData?.tPrimerNombre | titlecase }} 
                {{ patientData?.tSegundoNombre | titlecase | titlecase }} 
                {{ patientData?.tPrimerApellido | titlecase }} 
                {{ patientData?.tSegundoApellido | titlecase }} 
              </strong></h4>
            </div>
            <p class="mb-4">
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellat voluptas molestiae, rem, consequuntur dolorem quibusdam ex error sapiente facere quo, harum inventore quod voluptatibus hic! Repellat nobis architecto aperiam sit.
            </p>
            <div class="row">
              
              
            </div>
          </nb-card-body>
        </nb-card>
      </nb-card-back>
    </nb-flip-card>

  </div>
</div>