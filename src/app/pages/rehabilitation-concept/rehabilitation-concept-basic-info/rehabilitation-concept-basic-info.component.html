<!-- ********** START - Content - Edit entity ********** -->
<div id="content-rehabilitation-concept" class="container-fluid content-rehabilitation-concept" style="background-color: #FFF;" [nbSpinner]="loading_state" nbSpinnerSize="small" nbSpinnerStatus="info" nbSpinnerMessage="Cargando...">
  <!-- ********** START - Content - Button Go Back ********** -->
  <div class="row">
    <div class="col">
      <h3 class="text-center font_family_roboto">Concepto m&eacute;dico para remisi&oacute;n a administradora de fondo de pensiones (AFP)</h3>
    </div>
  </div>
  <div class="row justify-content-center" *ngIf="state_concept == 'Emitido'">
    <div class="col-6 text-center">
      <div class="alert alert-info" style="" role="alert">
        Este concepto ya ha sido emitido el <strong>{{ object_data_patient?.fechaEmision | date:'dd/MM/yyyy, h:mm a' }}</strong>
      </div>
    </div>
  </div>
  <!-- *********** END - Content - Button Go Back *********** -->
  <div class="row justify-content-center">
    <div class="col-4 mt-1 mb-1">
      <div class="col-8 float-right m-3" style="padding: 10px; border-radius: 20px; background-color: #FFF; border-left: 3px solid #4194de; min-width: 200px !important;max-width: 200px !important; box-shadow:7px 0px 12px 0px #e8e8e8;">
        <h3 style="color: #4194de; color: #4194de;font-weight: bolder;">{{ object_data_patient?.diasAcumulados }}</h3>
        <i class="fas fa-calendar-alt" style="font-size: 2rem; color: #4194de; margin: auto; position: absolute; top: 20px; right: 15px;"></i>
        <small style="color: #4194de;">D&iacute;as acumulados</small>
      </div>
    </div>
    <div class="col-3 mt-1 mb-1">
      <div class="col-8 self-align-center mt-3 ml-auto mr-auto" style="padding: 10px; border-radius: 20px; background-color: #FFF; border-left: 3px solid #4194de; min-width: 200px; max-width: 200px; box-shadow:7px 0px 12px 0px #e8e8e8;">
        <h3 style="color: #4194de; color: #4194de;font-weight: bolder;">{{ object_data_patient?.conceptosEmitidos }}</h3>
        <i class="fas fa-file-signature" style="font-size: 2rem; color: #4194de; margin: auto; position: absolute; top: 20px; right: 15px;"></i>
        <small style="color: #4194de;">Conceptos emitidos</small>
      </div>
    </div>
    <div class="col-4 mt-1 mb-1">
      <div class="col-8 float-left m-3" style="padding: 10px; border-radius: 20px; background-color: #FFF; border-left: 3px solid #4194de; min-width: 200px !important;max-width: 200px !important; box-shadow:7px 0px 12px 0px #e8e8e8;">
        <h3 style="color: #4194de; color: #4194de;font-weight: bolder;">{{ object_data_patient?.pclCalificados }}</h3>
        <i class="fas fa-user-check" style="font-size: 2rem; color: #4194de; margin: auto; position: absolute; top: 20px; right: 15px;"></i>
        <small style="color: #4194de;">PCL Calificados</small>
      </div>
    </div>
  </div>
  <!-- *********** START - Content - Informacion paciente *********** -->
  <div class="row">
    <div class="col">
      <div class="card" style="border-color: #1e90ff;">
        <div class="card-header" style="background-color: #1e90ff; color: #FFF;">
          <i class="far fa-id-badge"></i>&nbsp;
          Informaci&oacute;n paciente
        </div>
        <div class="card-body">
          <div class="container-fluid">
            <div class="row justify-content-center mt-3">
              <div class="col-4">
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="fas fa-user"></i>&nbsp;&nbsp;Nombre(s): 
                  </label>
                  <h6>{{ object_data_patient?.nombres | titlecase }}</h6>
                </div>
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="far fa-id-card"></i>&nbsp;&nbsp;Tipo de documento: 
                  </label>
                  <h6>{{ object_data_patient?.tipoDocumento }}</h6>
                </div>
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="fas fa-clinic-medical"></i>&nbsp;&nbsp;EPS&nbsp;<small>(Entidad Promotora de Salud)</small>: 
                  </label>
                  <h6>{{ object_data_patient?.eps | titlecase }}</h6>
                </div>
              </div>
              <div class="col-4">
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="fas fa-user"></i>&nbsp;&nbsp;Apellido(s): 
                  </label>
                  <h6>{{ object_data_patient?.apellidos | titlecase }}</h6>
                </div>
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="far fa-address-card"></i>&nbsp;&nbsp;N&uacute;mero de documento: 
                  </label>
                  <h6>{{ object_data_patient?.numeroDocumento }}</h6>
                </div>
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="fas fa-hand-holding-medical"></i>&nbsp;&nbsp;ARL&nbsp;<small>(Administradora de Riesgos Laborales)</small>: 
                  </label>
                  <h6>{{ object_data_patient?.arl | titlecase }}</h6>
                </div>
              </div>
              <div class="col-4">
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="far fa-calendar-alt"></i>&nbsp;&nbsp;Fecha de naciemiento: 
                  </label>
                  <h6>{{ object_data_patient?.fechaNacimiento | date:'dd/MM/yyyy' }}</h6>
                </div>
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="fas fa-user"></i>&nbsp;&nbsp;Edad: 
                  </label>
                  <h6>{{ object_data_patient?.edad }}&nbsp;a&ntilde;os</h6>
                </div>
                <div class="form-group">
                  <label for="formGroupExampleInput">
                    <i class="fas fa-blind"></i>&nbsp;&nbsp;AFP&nbsp;<small>(Administradora de Fondos de Pensiones)</small>: 
                  </label>
                  <h6>{{ object_data_patient?.afp | titlecase }}</h6>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ************ END - Content - Informacion paciente ************ -->
  <hr class="mt-3 mb-3">
  <!-- *********** START - Content - Diagnosticos *********** -->
  <div class="row">
    <div class="col">
      <div class="card" [ngStyle]="{'border-color': error_diagnotics_patient == true ? 'red' : '#1e90ff' }">
        <div class="card-header" style="background-color: #1e90ff; color: #FFF;" [ngClass]="{'text-white bg-danger': error_diagnotics_patient == true, 'bg-main-color': error_diagnotics_patient == false}">
          <i class="fas fa-stethoscope"></i>&nbsp;
          Diagn&oacute;sticos
          <i class="fas float-right" *ngIf="state_concept == 'Por Emitir'" [ngClass]="{'fa-angle-down': (show_form_add_diagnostic == false), 'fa-angle-up': (show_form_add_diagnostic == true) }" style="cursor: pointer;" (click)="(show_form_add_diagnostic == true) ? show_form_add_diagnostic = false : show_form_add_diagnostic = true"></i>
        </div>
        <div class="card-body">
          <div class="container-fluid">
            <div class="mb-4" *ngIf="state_concept == 'Por Emitir' && show_form_add_diagnostic">
              <div class="row">
                <div class="col-6 pb-4 form-control-group animate fadeIn">
                  <label class="label" for="select_diagnostic">Diagn&oacute;stico: </label>
                  <!-- bindValue="iIdcie10"  -->
                  <ng-select 
                    [items]="collection_cie_10[0]" 
                    bindLabel="tFullDescripcion" 
                    id="select_diagnostic" 
                    name="select_diagnostic"
                    #select_diagnostic="ngModel"
                    placeholder="Seleccione diagn&oacute;stico" 
                    [ngModelOptions]="{standalone: true}" 
                    [(ngModel)]="data_info_diagnostic.diagnostic" 
                    appendTo="body"
                    (focus)="errors = []" 
                    required 
                    [disabled]="load_data" 
                    [loading]="load_data" 
                    [clearable]="false"
                    [virtualScroll]="true"
                    dropdownPosition="bottom">
                  </ng-select>
                </div>
                <div class="col-3 pb-4 form-control-group animate fadeIn">
                  <label class="label" for="date_create_concept">Fecha de diagn&oacute;stico:</label>
                  <input nbInput
                    fullWidth
                    autofocus 
                    type="text"
                    class="kstdy-input-date" 
                    placeholder="Seleccione fecha de diagnÃ³stico"
                    id="date_create_concept"  
                    name="date_create_concept" 
                    (focus)="data_info_diagnostic.date_create = '';"
                    [(ngModel)]="data_info_diagnostic.date_create" 
                    [ngModelOptions]="{standalone: true}"
                    #date_create_concept="ngModel"
                    bsDatepicker 
                    [maxDate]="max_date"
                    [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-blue' }">
                </div>
                <div class="col-3 pb-4 form-control-group animate fadeIn">
                  <label class="label" for="select_etiology">Etiolog&iacute;a: </label>
                  <!-- bindValue="id"  -->
                  <ng-select 
                    [items]="collection_etiology" 
                    bindLabel="name" 
                    id="select_etiology" 
                    name="select_etiology"
                    #select_etiology="ngModel"
                    placeholder="Seleccione etiologÃ­a" 
                    [ngModelOptions]="{standalone: true}" 
                    [(ngModel)]="data_info_diagnostic.etiology" 
                    appendTo="body"
                    (focus)="errors = []" 
                    required 
                    [disabled]="load_data" 
                    [loading]="load_data" 
                    [clearable]="false"
                    [virtualScroll]="true" 
                    readonly="readonly"
                    dropdownPosition="bottom">
                  </ng-select>
                </div>
              </div>
              <div class="row m-0 p-0 justify-content-center">
                <div class="col-4 text-center">
                  <button class="btn kstdy-btns_actions kstdy-btn_action_create font_family_roboto" style="cursor: pointer;" id="button_add_diagnostic" (click)="fnAddDiagnostic(data_info_diagnostic)">Agregar</button>
                </div>
              </div>  
            </div>
            <div class="row" *ngIf="collection_diagnotics_patient.length > 0">
              <div class="col-6 text-left">
                <label class="label" style="font-weight: bold;">Diagn&oacute;stico</label>
              </div>
              <div class="col-3 text-left">
                <label class="label" style="font-weight: bold;">Fecha de elaboraci&oacute;n</label>
              </div>
              <div class="col-3 text-left">
                <label class="label" style="font-weight: bold;">Etiolog&iacute;a</label>
              </div>
            </div>
            <div *ngIf="collection_diagnotics_patient.length > 0">
              <div class="row" *ngFor="let diagnostic of collection_diagnotics_patient; let i = index;">
                <div class="col-6 d-flex">
                  <i class="fas fa-times" aria-hidden="true" style="cursor: pointer;" (click)="fnRemoveDiagnosticPatient(i)" *ngIf="state_concept == 'Por Emitir'"></i>&nbsp;&nbsp;
                  <label class="label">{{ diagnostic.nombreDiagnostico }}</label>
                </div>
                <div class="col-3">
                  <label class="label">{{ diagnostic.fechaIncapacidad | date:'short' }}</label>
                </div>
                <div class="col-3">
                  <label class="label">{{ diagnostic.nombreEtiologia }}</label>
                </div>
              </div>  
            </div>
            <div *ngIf="collection_diagnotics_patient.length < 1">
              <div class="row self-align-center text-center justify-content-center">
                <div class="col-5">
                  <i class="fas fa-stethoscope fa-3x" style="color: #a4abb3;" [ngClass]="{'text-danger': error_form == true}"></i>
                  <h3 style="color: #a4abb3;" [ngClass]="{'text-danger': error_form == true}">No hay diagnosticos!</h3>
                  <small style="color: #a4abb3;" [ngClass]="{'text-danger': error_form == true}">Debe agregar diagnosticos para completar el concepto de rehabilitaci&oacute;n</small>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ************ END - Content - Diagnosticos ************ -->
  <hr class="mt-3 mb-3">
  <!-- *********** START - Content - Descripcion secuelas *********** -->
  <div class="row">
    <div class="col">
      <div class="card" [ngStyle]="{'border-color': error_sequels_patient == true ? 'red' : '#1e90ff' }">
        <div class="card-header" style="background-color: #1e90ff; color: #FFF;" [ngClass]="{'text-white bg-danger': error_sequels_patient == true, 'bg-main-color': error_sequels_patient == false}">
          <i class="fas fa-procedures"></i>&nbsp;
          Descripci&oacute;n de secuelas
          <i class="fas float-right" *ngIf="state_concept == 'Por Emitir'" [ngClass]="{'fa-angle-down': (show_form_add_sequels == false), 'fa-angle-up': (show_form_add_sequels == true) }" style="cursor: pointer;" (click)="(show_form_add_sequels == true) ? show_form_add_sequels = false : show_form_add_sequels = true"></i>
        </div>
        <div class="card-body">
          <div class="container-fluid">
            <div class="mb-4" *ngIf="state_concept == 'Por Emitir' && show_form_add_sequels">
              <div class="row">
                <div class="col-3 pb-4 form-control-group animate fadeIn">
                  <label class="label" for="type_sequel">Tipo de secuela:</label>
                  <ng-select 
                    [items]="collection_type_sequel" 
                    bindLabel="name" 
                    id="type_sequel" 
                    name="type_sequel"
                    #type_sequel="ngModel"
                    placeholder="Seleccione tipo de secuela" 
                    [ngModelOptions]="{standalone: true}" 
                    [(ngModel)]="data_info_sequel.type_sequel" 
                    appendTo="body"
                    (focus)="errors = []" 
                    required 
                    [disabled]="load_data" 
                    [loading]="load_data" 
                    [clearable]="false"
                    [virtualScroll]="true"
                    dropdownPosition="bottom">
                  </ng-select>
                </div>
                <div class="col-6 pb-4 form-control-group animate fadeIn">
                  <label class="label" for="description_sequel">Descripci&oacute;n:</label>
                  <input nbInput
                    fullWidth
                    autofocus 
                    type="text"
                    class="kstdy-input-date" 
                    placeholder="Ingrese una descripciÃ³n de la secuela"
                    id="description_sequel"  
                    name="description_sequel" 
                    (focus)="data_info_sequel.description_sequel = '';"
                    [(ngModel)]="data_info_sequel.description_sequel" 
                    [ngModelOptions]="{standalone: true}"
                    #description_sequel="ngModel">
                </div>
                <div class="col-3 pb-4 form-control-group animate fadeIn">
                  <label class="label" for="select_medical_prognosis">PronÃ³stico:</label>
                  <ng-select 
                    [items]="collection_medical_prognosis" 
                    bindLabel="name" 
                    id="select_medical_prognosis" 
                    name="select_medical_prognosis"
                    #select_medical_prognosis="ngModel"
                    placeholder="Seleccione pronÃ³stico" 
                    [ngModelOptions]="{standalone: true}" 
                    [(ngModel)]="data_info_sequel.medical_prognosis" 
                    appendTo="body"
                    (focus)="errors = []" 
                    required 
                    [disabled]="load_data" 
                    [loading]="load_data" 
                    [clearable]="false"
                    [virtualScroll]="true"
                    dropdownPosition="bottom">
                  </ng-select>
                </div>
              </div>
              <div class="row m-0 p-0 self-align-center text-center justify-content-center">
                <div class="col-4 text-center">
                  <button class="btn kstdy-btns_actions kstdy-btn_action_create font_family_roboto" id="button_add_medical_prognosis" style="cursor: pointer;" (click)="fnAddMedicalPrognosis(data_info_sequel)">Agregar</button>
                </div>
              </div>  
            </div>
            
            <div class="row" *ngIf="collection_sequels_patient.length > 0">
              <div class="col-3 text-left">
                <label class="label" style="font-weight: bold;">Tipo de secuela</label>
              </div>
              <div class="col-6 text-left">
                <label class="label" style="font-weight: bold;">Descripci&oacute;n secuela</label>
              </div>
              <div class="col-3 text-left">
                <label class="label" style="font-weight: bold;">Pron&oacute;stico</label>
              </div>
            </div>
            <div *ngIf="collection_sequels_patient.length > 0">
              <div class="row" *ngFor="let item_sequel of collection_sequels_patient; let i = index;">
                <div class="col-3">
                  <i class="fas fa-times" style="cursor: pointer;" (click)="fnRemoveMedicalPrognosis(i)" *ngIf="state_concept == 'Por Emitir'"></i>&nbsp;&nbsp;
                  <label class="label">{{ item_sequel.nombreTipoSecuela }}</label>
                </div>
                <div class="col-6">
                  <label class="label">{{ item_sequel.descripcion }}</label>
                </div>
                <div class="col-3">
                  <label class="label">{{ item_sequel.nombrePronostico }}</label>
                </div>
              </div>
            </div>
            <div *ngIf="collection_sequels_patient.length < 1">
              <div class="row self-align-center text-center justify-content-center">
                <div class="col-5">
                  <i class="fas fa-procedures fa-3x" style="color: #a4abb3;" [ngClass]="{'text-danger': error_form == true}"></i>
                  <h3 style="color: #a4abb3;" [ngClass]="{'text-danger': error_form == true}">No hay descripci&oacute;n de secuelas!</h3>
                  <small style="color: #a4abb3;" [ngClass]="{'text-danger': error_form == true}">Debe agregar descripci&oacute;n de secuelas para completar el concepto de rehabilitaci&oacute;n</small>
                </div>
              </div>
            </div>

            <div class="row mt-1 mb-1 pt-2 pb-2">
              <div class="col-12 mt-2" *ngIf="state_concept == 'Por Emitir'">
                <label 
                  class="label" 
                  style="font-weight:bold;" 
                  [ngClass]="{'text-danger': !object_data_patient.description_medical_prognosis && error_form == true}">
                    Resum&eacute;n historia cl&iacute;nica y estado actual del paciente 
                    <span [ngStyle]="{'color': !object_data_patient.description_medical_prognosis ? 'red' : '#4c4c4c' }">*</span>
                    <small 
                      *ngIf="!object_data_patient.description_medical_prognosis && error_form == true" 
                      [ngStyle]="{'color': !object_data_patient.description_medical_prognosis ? 'red' : '#4c4c4c' }">
                      (Debe agregar descripci&oacute;n resum&eacute;n historia cl&iacute;nica y estado actual del paciente)
                    </small>
                </label>
                <textarea 
                  [ngStyle]="{'border-color': !object_data_patient.description_medical_prognosis && error_form == true ? 'red' : '#1e90ff' }"
                  [(ngModel)]="object_data_patient.description_medical_prognosis" 
                  [ngModelOptions]="{standalone: true}"
                  #description_medical_prognosis="ngModel" 
                  id="description_medical_prognosis" 
                  placeholder="Ingrese resumÃ©n historia clÃ­nica y estado actual del paciente"
                  class="form-control rounded-0" 
                  name="description_medical_prognosis"
                  required
                  rows="5"></textarea>
              </div>
              <div class="col-12 mt-5" *ngIf="state_concept == 'Emitido'">
                <div>
                  <label class="label" style="font-weight:bold;">Resum&eacute;n historia cl&iacute;nica y estado actual del paciente</label>
                </div>
                <div>
                  <p>
                    {{ object_data_patient?.historiaClinica }}
                  </p>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ************ END - Content - Descripcion secuelas ************ -->
  <hr class="mt-3 mb-3">
  <!-- *********** START - Content - Terapeutica posible *********** -->
  <div class="row">
    <div class="col">
      <div class="card" [ngStyle]="{'border-color': !object_data_patient.medical_treatment || (error_checks_therapy == true && error_form == true) ? 'red' : '#1e90ff' }">
        <div class="card-header" style="background-color: #1e90ff; color: #FFF;" [ngClass]="{'text-white bg-danger': !object_data_patient.medical_treatment || (error_checks_therapy == true && error_form == true), 'bg-main-color': error_checks_therapy == false}">
          <i class="far fa-id-badge"></i>&nbsp;
          Terapeutica posible
          <i class="fas float-right" *ngIf="false" [ngClass]="{'fa-angle-down': (show_form_add_therapy == false), 'fa-angle-up': (show_form_add_therapy == true) }" style="cursor: pointer;" (click)="(show_form_add_therapy == true) ? show_form_add_therapy = false : show_form_add_therapy = true"></i>
        </div>
        <div class="card-body">
          <div class="container-fluid">
            <div class="mb-4" *ngIf="show_form_add_therapy">
              <div class="row">
                <div class="col-5 pb-4 form-control-group animate fadeIn">
                  <label 
                    class="label" 
                    for="medical_treatment" [ngStyle]="{'color': !object_data_patient.medical_treatment ? 'red' : '#000'}">
                    Finalidad del tratamiento 
                    <small>(posibilidad de recuperaci&oacute;n)</small>
                  </label>
                  <ng-select 
                    [ngStyle]="{'border-color': !object_data_patient.medical_treatment ? 'red' : '#E9EEEF'}"
                    [items]="collection_medical_treatment" 
                    bindLabel="name" 
                    id="medical_treatment" 
                    name="medical_treatment"
                    #medical_treatment="ngModel"
                    placeholder="Seleccione tipo de secuela" 
                    [ngModelOptions]="{standalone: true}" 
                    [(ngModel)]="object_data_patient.medical_treatment" 
                    appendTo="body"
                    (focus)="errors = []" 
                    required 
                    [disabled]="load_data || state_concept == 'Emitido'" 
                    [loading]="load_data" 
                    [clearable]="false"
                    [virtualScroll]="true"
                    dropdownPosition="bottom">
                  </ng-select>
                </div>
                <div class="col-7 pb-4 form-control-group animate fadeIn">
                  <div class="row m-0 p-0">
                    <div class="col-4 mt-2 mb-2">
                      <div class="form-check form-check-inline">
                        <input 
                          [ngModelOptions]="{standalone: true}"
                          [(ngModel)]="object_data_patient.check_pharmacological" 
                          (change)="error_checks_therapy = false; error_checks_therapy = false"
                          class="form-check-input" 
                          type="checkbox" 
                          [disabled]="load_data || state_concept == 'Emitido'" 
                          id="check_pharmacological">
                        <label class="form-check-label" for="check_pharmacological" [ngStyle]="{'color': error_checks_therapy == true ? 'red' : '#a4abb3' }">Farmacol&oacute;gico</label>
                      </div>
                    </div>
                    <div class="col-4 mt-2 mb-2">
                      <div class="form-check form-check-inline">
                        <input 
                          [ngModelOptions]="{standalone: true}"
                          [(ngModel)]="object_data_patient.check_occupational_therapy" 
                          (change)="error_checks_therapy = false; error_checks_therapy = false"
                          class="form-check-input" 
                          type="checkbox" 
                          [disabled]="load_data || state_concept == 'Emitido'" 
                          id="check_occupational_therapy">
                        <label class="form-check-label" for="check_occupational_therapy" [ngStyle]="{'color': error_checks_therapy == true ? 'red' : '#a4abb3' }">Terapia ocupacional</label>
                      </div>
                    </div>
                    <div class="col-4 mt-2 mb-2">
                      <div class="form-check form-check-inline">
                        <input 
                          [ngModelOptions]="{standalone: true}"
                          [(ngModel)]="object_data_patient.check_speech_therapy" 
                          (change)="error_checks_therapy = false; error_checks_therapy = false"
                          class="form-check-input" 
                          type="checkbox" 
                          [disabled]="load_data || state_concept == 'Emitido'" 
                          id="check_speech_therapy">
                        <label class="form-check-label" for="check_speech_therapy" [ngStyle]="{'color': error_checks_therapy == true ? 'red' : '#a4abb3' }">Fonoaudiologia</label>
                      </div>
                    </div>
                    <div class="col-4 mt-2 mb-2">
                      <div class="form-check form-check-inline">
                        <input 
                          [ngModelOptions]="{standalone: true}"
                          [(ngModel)]="object_data_patient.check_surgical" 
                          (change)="error_checks_therapy = false; error_checks_therapy = false"
                          class="form-check-input" 
                          type="checkbox" 
                          [disabled]="load_data || state_concept == 'Emitido'" 
                          id="check_surgical">
                        <label class="form-check-label" for="check_surgical" [ngStyle]="{'color': error_checks_therapy == true ? 'red' : '#a4abb3' }">Quir&oacute;rgico</label>
                      </div>
                    </div>
                    <div class="col-4 mt-2 mb-2">
                      <div class="form-check form-check-inline">
                        <input 
                          [ngModelOptions]="{standalone: true}"
                          [(ngModel)]="object_data_patient.check_physical_therapy" 
                          (change)="error_checks_therapy = false; error_checks_therapy = false"
                          class="form-check-input" 
                          type="checkbox" 
                          [disabled]="load_data || state_concept == 'Emitido'" 
                          id="check_physical_therapy">
                        <label class="form-check-label" for="check_physical_therapy" [ngStyle]="{'color': error_checks_therapy == true ? 'red' : '#a4abb3' }">Terapia f&iacute;sica</label>
                      </div>
                    </div>
                    <div class="col-4 mt-2 mb-2">
                      <div class="form-check form-check-inline">
                        <input 
                          [ngModelOptions]="{standalone: true}"
                          [(ngModel)]="object_data_patient.check_other_therapy" 
                          (change)="error_checks_therapy = false; error_checks_therapy = false"
                          class="form-check-input" 
                          type="checkbox" 
                          [disabled]="load_data || state_concept == 'Emitido'" 
                          id="check_other_therapy">
                        <label class="form-check-label" for="check_other_therapy" [ngStyle]="{'color': error_checks_therapy == true ? 'red' : '#a4abb3' }">Otros tramites</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 mt-2" *ngIf="state_concept == 'Por Emitir'">
                  <label 
                    *ngIf="object_data_patient.check_other_therapy"
                    class="label" 
                    style="font-weight:bold;" 
                    [ngClass]="{'text-danger': !object_data_patient.description_other_therapy && object_data_patient.check_other_therapy && error_form == true}">
                      Especifique otros tratamientos 
                      <span *ngIf="object_data_patient.check_other_therapy" [ngStyle]="{'color': !object_data_patient.description_other_therapy && object_data_patient.check_other_therapy ? 'red' : '#4c4c4c' }">*</span>
                      <small 
                        *ngIf="!object_data_patient.description_other_therapy && object_data_patient.check_other_therapy && error_form == true" 
                        [ngStyle]="{'color': !object_data_patient.description_other_therapy && object_data_patient.check_other_therapy ? 'red' : '#4c4c4c' }">
                        (Debe agregar una descripci&oacute;n para especificar otros tratamientos si marco la opci&oacute;n superior de 'Otros tratamites')
                      </small>
                  </label>
                  <textarea 
                    *ngIf="object_data_patient.check_other_therapy"
                    [ngStyle]="{'border-color': !object_data_patient.description_other_therapy && object_data_patient.check_other_therapy && error_form == true ? 'red' : '#1e90ff' }"
                    [(ngModel)]="object_data_patient.description_other_therapy" 
                    [ngModelOptions]="{standalone: true}"
                    #description_other_therapy="ngModel" 
                    id="description_other_therapy" 
                    placeholder="Ingrese las descripciÃ³n especÃ­fica para otros tratamientos o terapias"
                    class="form-control rounded-0" 
                    name="description_other_therapy"
                    required
                    rows="5"></textarea>
                </div>
                <div class="col-12 mt-2" *ngIf="state_concept == 'Emitido'">
                  <div>
                    <label class="label" style="font-weight:bold;">Otros tratamientos descripci&oacute;n</label>
                  </div>
                  <div>
                    <p>
                      {{ object_data_patient?.otrosTratamientos }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ************ END - Content - Terapeutica posible ************ -->
  <hr class="mt-3 mb-3">
  <!-- *********** START - Content - Pronostico paciente *********** -->
  <div class="row">
    <div class="col">
      <div class="card" [ngStyle]="{'border-color': error_medical_concept == true ? 'red' : '#1e90ff' }">
        <div class="card-header" style="background-color: #1e90ff; color: #FFF;" [ngClass]="{'text-white bg-danger': error_medical_concept == true, 'bg-main-color': error_medical_concept == true}">
          <i class="far fa-id-badge"></i>&nbsp;
          Pron&oacute;stico paciente
          <i class="fas float-right" *ngIf="false" [ngClass]="{'fa-angle-down': (show_form_add_pronostic == false), 'fa-angle-up': (show_form_add_pronostic == true) }" style="cursor: pointer;" (click)="(show_form_add_pronostic == true) ? show_form_add_pronostic = false : show_form_add_pronostic = true"></i>
        </div>
        <div class="card-body">
          <div class="container-fluid">
            <div class="mb-4" *ngIf="show_form_add_pronostic">
              <div class="row">
                <div class="col-4">
                  <label class="label">Corto plazo <small>(menor a 1 a&ntilde;o)</small></label>
                  <div class="row mt-2 m-0 p-0">
                    <div class="col-4">
                      <input 
                        [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="object_data_patient.short_term" 
                        class="form-check-input"
                        name="radio_options_short_term" 
                        type="radio" 
                        [disabled]="load_data || state_concept == 'Emitido'" 
                        [value]="1"
                        id="check_forecast_short_term_good">
                      <label class="form-check-label m-1" for="check_forecast_short_term_good">Bueno</label>
                    </div>
                    <div class="col-4">
                      <input 
                        [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="object_data_patient.short_term" 
                        class="form-check-input"
                        name="radio_options_short_term" 
                        type="radio" 
                        [disabled]="load_data || state_concept == 'Emitido'" 
                        [value]="2"
                        id="check_forecast_short_term_regular">
                      <label class="form-check-label m-1" for="check_forecast_short_term_regular">Regular</label>
                    </div>
                    <div class="col-4">
                      <input 
                        [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="object_data_patient.short_term" 
                        class="form-check-input"
                        name="radio_options_short_term" 
                        type="radio" 
                        [disabled]="load_data || state_concept == 'Emitido'" 
                        [value]="3"
                        id="check_forecast_short_term_bad">
                      <label class="form-check-label m-1" for="check_forecast_short_term_bad">Malo</label>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <label class="label">Mediano plazo <small>(mayor a 1 a&ntilde;o)</small></label>
                  <div class="row mt-2 m-0 p-0">
                    <div class="col-4">
                      <input 
                        [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="object_data_patient.medium_term" 
                        class="form-check-input"
                        name="radio_options_med_term" 
                        type="radio" 
                        [disabled]="load_data || state_concept == 'Emitido'" 
                        [value]="1"
                        id="check_forecast_med_term_good">
                      <label class="form-check-label m-1" for="check_forecast_med_term_good">Bueno</label>
                    </div>
                    <div class="col-4">
                      <input 
                        [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="object_data_patient.medium_term" 
                        class="form-check-input"
                        name="radio_options_med_term" 
                        type="radio" 
                        [disabled]="load_data || state_concept == 'Emitido'" 
                        [value]="2"
                        id="check_forecast_med_term_regular">
                      <label class="form-check-label m-1" for="check_forecast_med_term_regular">Regular</label>
                    </div>
                    <div class="col-4">
                      <input 
                        [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="object_data_patient.medium_term" 
                        class="form-check-input"
                        name="radio_options_med_term" 
                        type="radio" 
                        [disabled]="load_data || state_concept == 'Emitido'" 
                        [value]="3"
                        id="check_forecast_med_term_bad">
                      <label class="form-check-label m-1" for="check_forecast_med_term_bad">Malo</label>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <label class="label" for="medical_concept" [ngStyle]="{'color': error_medical_concept == true ? 'red' : '#000'}">Concepto</label>
                  <ng-select 
                    [items]="collection_medical_concept" 
                    bindLabel="name" 
                    id="medical_concept" 
                    name="medical_concept"
                    #medical_concept="ngModel"
                    placeholder="Seleccione concepto" 
                    [ngModelOptions]="{standalone: true}" 
                    [(ngModel)]="object_data_patient.medical_concept" 
                    appendTo="body"
                    (change)="error_medical_concept = false; fnSetMedicalConcept($event);" 
                    required 
                    [disabled]="load_data || state_concept == 'Emitido'" 
                    [loading]="load_data" 
                    [clearable]="false"
                    [virtualScroll]="true"
                    dropdownPosition="bottom">
                  </ng-select>
                </div>
              </div>

              <div class="row">
                <div class="col-12">
                  <pre>
                    {{
                      state_concept | json
                    }}
                  </pre>
                  <pre>
                    {{
                      object_data_patient.medical_concept | json
                    }}
                  </pre>
                </div>
              </div>

              <div class="row">
                <div class="col-12 mt-5" *ngIf="state_concept == 'Por Emitir'">
                  <label class="label" style="font-weight:bold;">---Remisi&oacute;n administradora de fondo de pensiones *</label>
                  <div *ngIf="object_data_patient.medical_concept?.value == 1">
                    <p>
                      {{ object_data_patient?.text_medical_concept }}
                    </p>
                  </div>
                  <div class="row" *ngIf="object_data_patient.medical_concept?.value == 2">
                    
                    <div class="col-12 mt-2 mb-2 d-flex justify-content-between align-items-center">
                      <p style="margin-right: 2rem;margin-bottom: 0;">
                        {{ object_data_patient?.text_medical_concept }}
                      </p>
                      <span style="cursor: pointer;" (click)="fnCheckUnFavType(1);">
                        <i class="far " [ngClass]="{'fa-check-circle text-success': unfavType == 1, 'fa-circle text-secondary': unfavType != 1 }" style="font-size: 1.5rem;"></i>
                        <!-- <i class="far fa-circle text-secondary" style="font-size: 1.5rem;"></i> -->
                      </span>
                    </div>
                    <div class="col-12 mt-2 mb-2 d-flex justify-content-between align-items-center">
                      <p style="margin-right: 2rem;margin-bottom: 0;">
                        {{ object_data_patient?.text_medical_concept }}
                      </p>
                      <span style="cursor: pointer;" (click)="fnCheckUnFavType(2);">
                        <i class="far " [ngClass]="{'fa-check-circle text-success': unfavType == 2, 'fa-circle text-secondary': unfavType != 2}" style="font-size: 1.5rem;"></i>
                        <!-- <i class="far fa-circle text-secondary" style="font-size: 1.5rem;"></i> -->
                      </span>
                    </div>

                  </div>
                </div>
                <div class="col-12 mt-5" *ngIf="state_concept == 'Emitido'">
                  <label class="label" style="font-weight:bold;">Remisi&oacute;n administradora de fondo de pensiones</label>
                  <div>
                    <p>
                      {{ object_data_patient.text_medical_concept }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ************ END - Content - Pronostico paciente ************ -->

  <div class="mt-1 mb-1 pt-2 pb-2" style="border: 0px solid #CCC; border-radius: 10px;">
    <div class="col-12 row mt-5 mb-5 m-0 p-0 justify-content-center">
      <div class="col-4 text-center" *ngIf="state_concept == 'Por Emitir'">
        <button 
        class="btn kstdy-btns_actions kstdy-btn_action_create font_family_roboto" 
        id="button_add_diagnostic" 
        style="cursor: pointer;" 
        (click)="fnValidFormRehabilitationConcept(object_data_patient, collection_diagnotics_patient, collection_sequels_patient)">Generar</button>
      </div>
      <div class="col-4 text-center" *ngIf="state_concept == 'Emitido'">
        <button 
        class="btn btn-primary font_family_roboto" 
        id="button_add_diagnostic" 
        style="cursor: pointer; background-color: #1e90ff;" 
        (click)="fnGoBackList()">Regresar al listado anterior</button>
      </div>
    </div>
  </div>

</div>
<!-- ********** END - Content - Edit entity ********** -->